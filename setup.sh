#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram Bot
echo "ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot"
echo "=========================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ .env —Ñ–∞–π–ª
if [ ! -f .env ]; then
    echo "üìù –°–æ–∑–¥–∞—é —Ñ–∞–π–ª .env –∏–∑ —à–∞–±–ª–æ–Ω–∞..."
    cp env.example .env
    echo "‚úÖ –§–∞–π–ª .env —Å–æ–∑–¥–∞–Ω!"
    echo ""
    echo "‚ö†Ô∏è  –í–ê–ñ–ù–û: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:"
    echo "   - BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
    echo "   - ADMIN_CHAT_ID=–≤–∞—à_id_–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
    echo ""
else
    echo "‚úÖ –§–∞–π–ª .env —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω –≤ application.properties
if grep -q "7393663223:AAHDr3PXp-Ty2_zx-PLnHEGidpv6aK0Ai10" src/main/resources/application.properties; then
    echo "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –í application.properties –Ω–∞–π–¥–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω!"
    echo "   –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"
    echo "   –°–º. SECURITY_SETUP.md –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º .gitignore
if grep -q "\.env" .gitignore; then
    echo "‚úÖ .env —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore"
else
    echo "‚ö†Ô∏è  .env —Ñ–∞–π–ª –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore!"
    echo "   –î–æ–±–∞–≤—å—Ç–µ '.env' –≤ .gitignore –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
fi

echo ""
echo "üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:"
echo "   ./gradlew bootRun"
echo ""
echo "üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:"
echo "   - SECURITY_SETUP.md - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
echo "   - NEW_FEATURES.md - –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"
echo "   - README.md - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
