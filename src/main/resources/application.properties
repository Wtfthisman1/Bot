spring.application.name=Bot

# ========================================
# НАСТРОЙКИ БОТА (используйте переменные окружения)
# ========================================
bot.name=${BOT_NAME:FindInform_rail_bot}
bot.key=${BOT_TOKEN}
admin.chat.id=${ADMIN_CHAT_ID}
videos.base-dir=${user.home}/videos
whisper.script=${WHISPER_SCRIPT:classpath:pythonScript/Transcribe.py}
downloader.script=${DOWNLOADER_SCRIPT:classpath:pythonScript/Downloader.py}
spring.devtools.restart.enabled=false
upload.base-url=${UPLOAD_BASE_URL:http://localhost:8080}
download.base-url=${DOWNLOAD_BASE_URL:http://localhost:8080}
spring.servlet.multipart.max-file-size=2500MB
spring.servlet.multipart.max-request-size=2500MB
upload.dir=${user.home}/upload
app.storage.base=${user.dir}/upload/videos

# ========================================
# ПРОИЗВОДИТЕЛЬНОСТЬ И РЕСУРСЫ
# ========================================
# Оптимизация JVM
spring.jvm.memory=-Xmx2g -Xms512m -XX:+UseG1GC -XX:+UseContainerSupport

# Оптимизация веб-сервера
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.max-connections=8192
server.tomcat.accept-count=100

# Оптимизация загрузки файлов
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.location=${java.io.tmpdir}

# ========================================
# MONITORING И HEALTH CHECKS
# ========================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=when-authorized
management.metrics.export.prometheus.enabled=true

# ========================================
# НАСТРОЙКИ ОЧИСТКИ ФАЙЛОВ
# ========================================
cleanup.enabled=true
cleanup.retention-days=14
cleanup.schedule=0 0 2 * * ?

# ========================================
# НАСТРОЙКИ ПЛАНИРОВЩИКА
# ========================================
spring.task.scheduling.pool.size=4
spring.task.execution.pool.core-size=4
spring.task.execution.pool.max-size=8
spring.task.execution.pool.queue-capacity=100

# ========================================
# ЛОГИРОВАНИЕ
# ========================================
logging.level.com.example.demo=INFO
logging.level.org.springframework.web=WARN
logging.level.org.telegram=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} %-5level %logger{36} - %msg%n

# ========================================
# БЕЗОПАСНОСТЬ
# ========================================
# Разрешить циклические зависимости
spring.main.allow-circular-references=true

# Отключить ненужные endpoints в production
management.endpoints.web.base-path=/actuator
management.endpoint.shutdown.enabled=false